{% extends 'app/base.html' %}
{% load static %}
{% load display_name %}

{% block title %}
  Search Friend
{% endblock %}

{% block styles %}
<link rel="stylesheet" href="{% static 'social/styles/search-friend.css' %}">
{% endblock %}

{% block content %}
<div class="search-container">
  <!-- Request: /social/user_search?q=input-value -->
  <form method="get" class="search-friend-form">
    <input class="search-friend-bar" name="q" value="{{ q }}" placeholder="Search usersâ€¦" />
    <button class="button search-button">Search</button>
  </form>

  <!-- User list -->
  <ul class="user-list">
    {% for u in results %}
    <li>
      <span>{{ u|get_display_name }}</span>
      <!-- Request: /social/request/<int:user_id>/ -->
      <form method="post" action="{% url 'social:send_request' u.id %}">{% csrf_token %}
        <button class="button add-friend-button-search"
        onclick="return confirm('Send friend request to {{ u|get_display_name }}?');">
          Add Friend
        </button>
      </form>
    </li>
    {% empty %}
    {% if q %}
      <li>No results</li>
    {% endif %}
    {% endfor %}
  </ul>

  <div class="back-button">
    <a href="{% url 'social:friends' %}">
      <button class="button button-secondary">Back to Social</button>
    </a>
  </div>
</div>

<style>
  .search-container {
    padding: 20px;
    max-width: 1200px;
    margin: 0 auto;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
  }

  .back-button {
    text-align: center;
    margin-top: 20px;
  }

  .back-button .button {
    padding: 10px 20px;
  }

  .button-secondary {
    background: #757575;
    color: white;
  }

  .button-secondary:hover {
    background: #616161;
  }
</style>
{% endblock %}
